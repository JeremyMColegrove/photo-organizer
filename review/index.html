<!doctype html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Review Photos</title>
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
      :root { color-scheme: dark }
      /* Masonry container stays centered */
      #grid { max-width: 1100px; margin: 0 auto; }
      /* Prevent breaks inside cards (helps masonry & reflow) */
      .avoid-break { break-inside: avoid; -webkit-column-break-inside: avoid; page-break-inside: avoid; }
    </style>
  </head>
  <body class="bg-zinc-950 text-zinc-100">
    <header class="sticky top-0 z-20 border-b border-zinc-800 bg-zinc-900/80 backdrop-blur">
      <div class="mx-auto flex w-full max-w-6xl items-center gap-3 px-4 py-3">
        <div class="flex items-center gap-2">
          <div class="h-7 w-7 rounded-lg bg-blue-600/25 ring-1 ring-blue-500/40"></div>
          <div class="text-sm text-zinc-300">Photo Review</div>
        </div>
        <div class="mx-auto"></div>
        <div class="flex items-center gap-2">
          <span id="group-status" class="hidden text-sm text-zinc-400 mr-2"></span>
          <button id="prev-group" type="button" class="hidden rounded-lg border border-zinc-700 bg-zinc-800/70 px-3 py-2 text-sm hover:bg-zinc-800">Prev group</button>
          <button id="next-group" type="button" class="hidden rounded-lg border border-zinc-700 bg-zinc-800/70 px-3 py-2 text-sm hover:bg-zinc-800">Next group</button>

          <button id="select-rec"  type="button" class="rounded-lg border border-zinc-700 bg-zinc-800/70 px-3 py-2 text-sm hover:bg-zinc-800">Recommended</button>
          <button id="select-all"  type="button" class="rounded-lg border border-zinc-700 bg-zinc-800/70 px-3 py-2 text-sm hover:bg-zinc-800">Select all</button>
          <button id="select-none" type="button" class="rounded-lg border border-zinc-700 bg-zinc-800/70 px-3 py-2 text-sm hover:bg-zinc-800">Clear</button>

          <button id="save"   type="button" class="rounded-lg bg-emerald-600 px-4 py-2 text-sm font-medium hover:bg-emerald-500 focus:outline-none focus:ring-2 focus:ring-emerald-400/60">Save</button>
          <button id="finish" type="button" class="hidden rounded-lg bg-emerald-600 px-4 py-2 text-sm font-medium hover:bg-emerald-500 focus:outline-none focus:ring-2 focus:ring-emerald-400/60">Finish</button>
        </div>
      </div>
    </header>

    <main class="mx-auto w-full max-w-6xl p-4">
      <!-- Masonry container (Macy will position children) -->
      <div id="grid" class="masonry"></div>

      <div id="empty" class="hidden mt-20 flex flex-col items-center gap-3 text-center text-zinc-400">
        <div class="h-16 w-16 rounded-2xl bg-zinc-800 ring-1 ring-zinc-700"></div>
        <p class="text-lg">No photos found</p>
        <p class="text-sm">Check your data source and try again.</p>
      </div>
    </main>

    <!-- Modal -->
    <div id="modal" class="hidden fixed inset-0 z-40 bg-black/90">
      <button id="modal-close" class="absolute right-4 top-4 rounded-md bg-black/40 px-3 py-2 text-sm ring-1 ring-zinc-700 hover:bg-black/55">Close</button>
      <div class="flex h-full w-full items-center justify-center p-4">
        <img id="modal-img" src="" alt="" class="max-h-full max-w-full object-contain" />
      </div>
    </div>

    <!-- Done Popup -->
    <div id="done" class="hidden fixed inset-0 z-50 bg-black/80">
      <div class="flex h-full w-full items-center justify-center p-4">
        <div class="w-full max-w-md rounded-xl border border-zinc-800 bg-zinc-900 p-6 text-center shadow-xl">
          <div class="mx-auto mb-4 h-12 w-12 rounded-full bg-emerald-600/20 ring-1 ring-emerald-500/40 flex items-center justify-center">
            <svg viewBox="0 0 24 24" class="h-6 w-6 text-emerald-400" fill="none" stroke="currentColor" stroke-width="2.5">
              <path d="M5 13l4 4L19 7" stroke-linecap="round" stroke-linejoin="round" />
            </svg>
          </div>
          <h2 class="mb-2 text-lg font-semibold">All Done!</h2>
          <p class="mb-6 text-sm text-zinc-300">Your selections were saved successfully. You can close this tab and return to the console.</p>
          <div class="flex items-center justify-center gap-3">
            <button id="done-close-tab" class="rounded-lg bg-emerald-600 px-4 py-2 text-sm font-medium hover:bg-emerald-500 focus:outline-none focus:ring-2 focus:ring-emerald-400/60">Close Tab</button>
            <button id="done-dismiss" class="rounded-lg border border-zinc-700 bg-zinc-800/70 px-3 py-2 text-sm hover:bg-zinc-800">Dismiss</button>
          </div>
        </div>
      </div>
    </div>

    <!-- jQuery -->
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
    <!-- Macy.js (tiny masonry) -->
    <script src="https://cdn.jsdelivr.net/npm/macy@2.5.1/dist/macy.min.js"></script>
    <!-- App -->
    <script src="/script.js"></script>
  </body>
</html>
